---
import "../styles/global.css";

import Cover from "../components/Cover.astro";
import HeroCard from "../components/HeroCard.astro";
import PostCard from "../components/PostCard.astro";
import Footer from "../components/Footer.astro";
import Background from "../components/Background.astro";
import featured from "../data/featured.json";

import data from "../data/posts.json";

const posts = data?.posts || [];
const hero = posts[0];
const rest = posts.slice(1);

// Ritmo editoriale (mobile): M, S, S, M, S, S, S...
const pattern = ["medium","small","small","medium","small","small","small"];
---
<!doctype html>
<html lang="it">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>KETOGO</title>
    <meta name="description" content="Weekly visual selection." />
  </head>
  <body class="overflow-x-hidden">
    <Background />
    <main>
      <Cover />

      {hero && (
        <section class="pb-10">
          <HeroCard post={hero} />
        </section>
      )}

      <section class="pb-8">
        <div class="px-5 pb-4">
          <div class="flex items-center gap-3">
            <div class="h-2 w-2 rounded-full bg-[rgb(var(--accent))]"></div>
            <h2 class="text-xs uppercase tracking-[0.28em] text-[rgb(var(--muted))]">
              More
            </h2>
            <div class="h-px flex-1 bg-[rgb(var(--stroke))]"></div>
          </div>
        </div>

        <div class="flex flex-col gap-4">
          {rest.map((p, idx) => (
            <PostCard post={p} variant={pattern[idx % pattern.length]} />
          ))}
        </div>
      </section>

      <Footer generatedAt={data.generatedAt} subreddits={data.subreddits || []} />
    </main>
  </body>
</html>
